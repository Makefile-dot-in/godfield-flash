<!doctype html>
<html app-controller>
  <head>
    <meta charset="utf-8">
		<title>God Field</title>
		<link rel="shortcut icon" href="/favicon.ico">
		<link rel="stylesheet" href="../stylesheets/default.css">
		<script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
		<script type="text/javascript" src="/scripts/swfobject.js"></script>
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		  ga('create', 'UA-676395-1', 'godfield.net');
		  ga('require', 'displayfeatures');
		  ga('send', 'pageview');
		</script>
	</head>
	<body class="game">
		<div style="text-align: left; margin-left: 8px; width: 1040px;">
			<div style="float: left; margin-top: 8px; margin-bottom: 40px;">
				<script type="text/javascript"><!--
					google_ad_client = "pub-0557764768355229";
					google_ad_slot = "5835816534";
					google_ad_width = 728;
					google_ad_height = 90;
					//-->
				</script>
				<script type="text/javascript"
					src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
				</script>
			</div>
			<div id="swf" style="clear: both; float: left; margin-bottom: 40px; width: 800px; height: 600px;"></div>
			<div style="float: left; margin-left: 40px;">
				<script type="text/javascript"><!--
					google_ad_client = "ca-pub-0557764768355229";
					google_ad_slot = "8284471977";
					google_ad_width = 160;
					google_ad_height = 600;
					//-->
				</script>
				<script type="text/javascript"
					src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
				</script>
			</div>
			<div>
				<script type="text/javascript"><!--
					google_ad_client = "pub-0557764768355229";
					google_ad_slot = "3620846008";
					google_ad_width = 728;
					google_ad_height = 90;
					//-->
				</script>
				<script type="text/javascript"
					src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
				</script>
			</div>
		</div>
		<script type="text/javascript">
			const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const ipAddress = urlParams.get('ipAddress') ?? '127.0.0.1';

			window.RufflePlayer.config = {
				socketProxy: [
					{
						host: "training.godfield.net", // The address of the server that Flash tries to connect to
						port: 58001, // The port that Flash tries to connect to
						proxyUrl: `ws://${ipAddress}:58001`, // The actual proxy that Ruffle will connect to, instead of the above server
					},
					// EN
					{
						host: "enfreefight.godfield.net",
						port: 58151,
						proxyUrl: `ws://${ipAddress}:58151`,
					},
					{
						host: "enfreefightprivate.godfield.net",
						port: 58251,
						proxyUrl: `ws://${ipAddress}:58251`,
					},
					// JP
					{
						host: "freefight.godfield.net",
						port: 58101,
						proxyUrl: `ws://${ipAddress}:58101`,
					},
					{
						host: "freefightprivate.godfield.net",
						port: 58201,
						proxyUrl: `ws://${ipAddress}:58201`,
					},
				],
				urlRewriteRules: [
					[/^https?:\/\/www.godfield.net\/(.*)$/, `http://${ipAddress}/$1`],
					[/^https?:\/\/static.godfield.net\/(.*)/, `http://${ipAddress}/$1`],
					[/^https?:\/\/training.godfield.net\/(.*)$/, `http://${ipAddress}/$1`],
					[/^https?:\/\/enfreefight.godfield.net\/(.*)$/, `http://${ipAddress}/$1`],
					[/^https?:\/\/freefight.godfield.net\/(.*)$/, `http://${ipAddress}/$1`],
					[/^https?:\/\/enfreefightprivate.godfield.net\/(.*)$/, `http://${ipAddress}/$1`],
					[/^https?:\/\/freefightprivate.godfield.net\/(.*)$/, `http://${ipAddress}/$1`]
				],
			};

			var swfObject = new SWFObject("/game/godfield.swf", "godfield", "800", "600", "10", "#ffffff");
			swfObject.addParam("wmode", "window");
			swfObject.addParam("menu", false);
			swfObject.addVariable("language", "en");
			swfObject.addVariable("ipAddress", "201.19.210.203");
			swfObject.addVariable("valid", true);
			swfObject.write("swf");
		</script>
	</body>
</html>
